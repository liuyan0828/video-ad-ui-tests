name: Run XCUI Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  ui-tests:
    runs-on: macos-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

#      - name: Set up Xcode
#        run: sudo xcode-select -s /Applications/Xcode_14.2.app

      - name: Run UI Tests
        working-directory: Project/youtube-player-ios-example
        run: |
          pwd && ls -al
          xcodebuild test \
            -workspace youtube-player-ios-example.xcworkspace \
            -scheme youtube-player-ios-example \
            -destination "platform=iOS Simulator,name=iPhone 15,OS=16.2" \
            -derivedDataPath build



      # - name: Upload test results
      #   uses: actions/upload-artifact@v2
      #   with:
      #     name: test-results
      #     path: build/Logs/Test

